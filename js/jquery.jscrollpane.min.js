(function(d,ma,t){d.fn.jScrollPane=function(C){function fa(b,C){function ga(a){var c,f,u,r,y,q=!1,l=!1;e=a;if(h===t)r=b.scrollTop(),y=b.scrollLeft(),b.css({overflow:"hidden",padding:0}),m=b.innerWidth()+P,k=b.innerHeight(),b.width(m),h=d('<div class="jspPane" />').css("padding",na).append(b.children()),g=d('<div class="jspContainer" />').css({width:m+"px",height:k+"px"}).append(h).appendTo(b);else{b.css("width","");q=e.stickToBottom&&va();l=e.stickToRight&&wa();if(u=b.innerWidth()+P!=m||b.outerHeight()!=
k)m=b.innerWidth()+P,k=b.innerHeight(),g.css({width:m+"px",height:k+"px"});if(!u&&oa==v&&h.outerHeight()==s){b.width(m);return}oa=v;h.css("width","");b.width(m);g.find(">.jspVerticalBar,>.jspHorizontalBar").remove().end()}h.css("overflow","auto");v=a.contentWidth?a.contentWidth:h[0].scrollWidth;s=h[0].scrollHeight;h.css("overflow","");ha=v/m;Y=s/k;A=1<Y;z=1<ha;if(!z&&!A)b.removeClass("jspScrollable"),h.css({top:0,width:g.width()-P}),g.unbind(ia),h.find(":input,a").unbind("focus.jsp"),b.attr("tabindex",
"-1").removeAttr("tabindex").unbind("keydown.jsp keypress.jsp"),pa();else{b.addClass("jspScrollable");if(a=e.maintainPosition&&(n||p))c=G(),f=H();fa();xa();ya();a&&(Q(l?v-m:c,!1),I(q?s-k:f,!1));za();Aa();Ba();e.enableKeyboardNavigation&&Ca();e.clickOnTrack&&Da();Ea();e.hijackInternalLinks&&Fa()}e.autoReinitialise&&!R?R=setInterval(function(){ga(e)},e.autoReinitialiseDelay):!e.autoReinitialise&&R&&clearInterval(R);r&&b.scrollTop(0)&&I(r,!1);y&&b.scrollLeft(0)&&Q(y,!1);b.trigger("jsp-initialised",[z||
A])}function fa(){A&&(g.append(d('<div class="jspVerticalBar" />').append(d('<div class="jspCap jspCapTop" />'),d('<div class="jspTrack" />').append(d('<div class="jspDrag" />').append(d('<div class="jspDragTop" />'),d('<div class="jspDragBottom" />'))),d('<div class="jspCap jspCapBottom" />'))),Z=g.find(">.jspVerticalBar"),D=Z.find(">.jspTrack"),w=D.find(">.jspDrag"),e.showArrows&&(U=d('<a class="jspArrow jspArrowUp" />').bind("mousedown.jsp",J(0,-1)).bind("click.jsp",S),V=d('<a class="jspArrow jspArrowDown" />').bind("mousedown.jsp",
J(0,1)).bind("click.jsp",S),e.arrowScrollOnHover&&(U.bind("mouseover.jsp",J(0,-1,U)),V.bind("mouseover.jsp",J(0,1,V))),qa(D,e.verticalArrowPositions,U,V)),K=k,g.find(">.jspVerticalBar>.jspCap:visible,>.jspVerticalBar>.jspArrow").each(function(){K-=d(this).outerHeight()}),w.hover(function(){w.addClass("jspHover")},function(){w.removeClass("jspHover")}).bind("mousedown.jsp",function(a){d("html").bind("dragstart.jsp selectstart.jsp",S);w.addClass("jspActive");var c=a.pageY-w.position().top;d("html").bind("mousemove.jsp",
function(a){O(a.pageY-c,!1)}).bind("mouseup.jsp mouseleave.jsp",ra);return!1}),sa())}function sa(){D.height(K+"px");n=0;ta=e.verticalGutter+D.outerWidth();try{0===Z.position().left&&h.css("margin-left",ta+"px")}catch(a){}}function xa(){z&&(g.append(d('<div class="jspHorizontalBar" />').append(d('<div class="jspCap jspCapLeft" />'),d('<div class="jspTrack" />').append(d('<div class="jspDrag" />').append(d('<div class="jspDragLeft" />'),d('<div class="jspDragRight" />'))),d('<div class="jspCap jspCapRight" />'))),
$=g.find(">.jspHorizontalBar"),E=$.find(">.jspTrack"),x=E.find(">.jspDrag"),e.showArrows&&(W=d('<a class="jspArrow jspArrowLeft" />').bind("mousedown.jsp",J(-1,0)).bind("click.jsp",S),X=d('<a class="jspArrow jspArrowRight" />').bind("mousedown.jsp",J(1,0)).bind("click.jsp",S),e.arrowScrollOnHover&&(W.bind("mouseover.jsp",J(-1,0,W)),X.bind("mouseover.jsp",J(1,0,X))),qa(E,e.horizontalArrowPositions,W,X)),x.hover(function(){x.addClass("jspHover")},function(){x.removeClass("jspHover")}).bind("mousedown.jsp",
function(a){d("html").bind("dragstart.jsp selectstart.jsp",S);x.addClass("jspActive");var c=a.pageX-x.position().left;d("html").bind("mousemove.jsp",function(a){T(a.pageX-c,!1)}).bind("mouseup.jsp mouseleave.jsp",ra);return!1}),B=g.innerWidth(),ua())}function ua(){g.find(">.jspHorizontalBar>.jspCap:visible,>.jspHorizontalBar>.jspArrow").each(function(){B-=d(this).outerWidth()});E.width(B+"px");p=0}function ya(){if(z&&A){var a=E.outerHeight(),c=D.outerWidth();K-=a;d($).find(">.jspCap:visible,>.jspArrow").each(function(){B+=
d(this).outerWidth()});B-=c;k-=c;m-=a;E.parent().append(d('<div class="jspCorner" />').css("width",a+"px"));sa();ua()}z&&h.width(g.outerWidth()-P+"px");s=h.outerHeight();Y=s/k;z&&(L=Math.ceil(1/ha*B),L>e.horizontalDragMaxWidth?L=e.horizontalDragMaxWidth:L<e.horizontalDragMinWidth&&(L=e.horizontalDragMinWidth),x.width(L+"px"),M=B-L,ja(p));A&&(N=Math.ceil(1/Y*K),N>e.verticalDragMaxHeight?N=e.verticalDragMaxHeight:N<e.verticalDragMinHeight&&(N=e.verticalDragMinHeight),w.height(N+"px"),F=K-N,ka(n))}function qa(a,
c,f,d){var e="before",b="after";"os"==c&&(c=/Mac/.test(navigator.platform)?"after":"split");c==e?b=c:c==b&&(e=c,c=f,f=d,d=c);a[e](f)[b](d)}function J(a,c,f){return function(){Ga(a,c,this,f);this.blur();return!1}}function Ga(a,c,f,u){f=d(f).addClass("jspActive");var b,y,q=!0,g=function(){0!==a&&l.scrollByX(a*e.arrowButtonSpeed);0!==c&&l.scrollByY(c*e.arrowButtonSpeed);y=setTimeout(g,q?e.initialDelay:e.arrowRepeatFreq);q=!1};g();b=u?"mouseout.jsp":"mouseup.jsp";u=u||d("html");u.bind(b,function(){f.removeClass("jspActive");
y&&clearTimeout(y);y=null;u.unbind(b)})}function Da(){pa();A&&D.bind("mousedown.jsp",function(a){if(a.originalTarget===t||a.originalTarget==a.currentTarget){var c=d(this),f=c.offset(),b=a.pageY-f.top-n,r,y=!0,q=function(){var f=c.offset(),f=a.pageY-f.top-N/2,d=k*e.scrollPagePercent,h=F*d/(s-k);if(0>b)n-h>f?l.scrollByY(-d):O(f);else if(0<b)n+h<f?l.scrollByY(d):O(f);else{g();return}r=setTimeout(q,y?e.initialDelay:e.trackClickRepeatFreq);y=!1},g=function(){r&&clearTimeout(r);r=null;d(document).unbind("mouseup.jsp",
g)};q();d(document).bind("mouseup.jsp",g);return!1}});z&&E.bind("mousedown.jsp",function(a){if(a.originalTarget===t||a.originalTarget==a.currentTarget){var c=d(this),f=c.offset(),b=a.pageX-f.left-p,r,g=!0,q=function(){var f=c.offset(),f=a.pageX-f.left-L/2,d=m*e.scrollPagePercent,k=M*d/(v-m);if(0>b)p-k>f?l.scrollByX(-d):T(f);else if(0<b)p+k<f?l.scrollByX(d):T(f);else{h();return}r=setTimeout(q,g?e.initialDelay:e.trackClickRepeatFreq);g=!1},h=function(){r&&clearTimeout(r);r=null;d(document).unbind("mouseup.jsp",
h)};q();d(document).bind("mouseup.jsp",h);return!1}})}function pa(){E&&E.unbind("mousedown.jsp");D&&D.unbind("mousedown.jsp")}function ra(){d("html").unbind("dragstart.jsp selectstart.jsp mousemove.jsp mouseup.jsp mouseleave.jsp");w&&w.removeClass("jspActive");x&&x.removeClass("jspActive")}function O(a,c){A&&(0>a?a=0:a>F&&(a=F),c===t&&(c=e.animateScroll),c?l.animate(w,"top",a,ka):(w.css("top",a),ka(a)))}function ka(a){a===t&&(a=w.position().top);g.scrollTop(0);n=a;var c=0===n,f=n==F;a=-(a/F)*(s-k);
if(aa!=c||ba!=f)aa=c,ba=f,b.trigger("jsp-arrow-change",[aa,ba,ca,da]);e.showArrows&&(U[c?"addClass":"removeClass"]("jspDisabled"),V[f?"addClass":"removeClass"]("jspDisabled"));h.css("top",a);b.trigger("jsp-scroll-y",[-a,c,f]).trigger("scroll")}function T(a,c){z&&(0>a?a=0:a>M&&(a=M),c===t&&(c=e.animateScroll),c?l.animate(x,"left",a,ja):(x.css("left",a),ja(a)))}function ja(a){a===t&&(a=x.position().left);g.scrollTop(0);p=a;var c=0===p,f=p==M;a=-(a/M)*(v-m);if(ca!=c||da!=f)ca=c,da=f,b.trigger("jsp-arrow-change",
[aa,ba,ca,da]);e.showArrows&&(W[c?"addClass":"removeClass"]("jspDisabled"),X[f?"addClass":"removeClass"]("jspDisabled"));h.css("left",a);b.trigger("jsp-scroll-x",[-a,c,f]).trigger("scroll")}function I(a,c){O(a/(s-k)*F,c)}function Q(a,c){T(a/(v-m)*M,c)}function ea(a,c,f){var b,r,h=0,q=0,l,n,p;try{b=d(a)}catch(s){return}r=b.outerHeight();a=b.outerWidth();g.scrollTop(0);for(g.scrollLeft(0);!b.is(".jspPane");)if(h+=b.position().top,q+=b.position().left,b=b.offsetParent(),/^body|html$/i.test(b[0].nodeName))return;
b=H();l=b+k;h<b||c?n=h-e.verticalGutter:h+r>l&&(n=h-k+r+e.verticalGutter);n&&I(n,f);h=G();n=h+m;q<h||c?p=q-e.horizontalGutter:q+a>n&&(p=q-m+a+e.horizontalGutter);p&&Q(p,f)}function G(){return-h.position().left}function H(){return-h.position().top}function va(){var a=s-k;return 20<a&&10>a-H()}function wa(){var a=v-m;return 20<a&&10>a-G()}function Aa(){g.unbind(ia).bind(ia,function(a,c,f,d){a=p;c=n;l.scrollBy(f*e.mouseWheelSpeed,-d*e.mouseWheelSpeed,!1);return a==p&&c==n})}function S(){return!1}function za(){h.find(":input,a").unbind("focus.jsp").bind("focus.jsp",
function(a){ea(a.target,!1)})}function Ca(){function a(){var a=p,d=n;switch(c){case 40:l.scrollByY(e.keyboardSpeed,!1);break;case 38:l.scrollByY(-e.keyboardSpeed,!1);break;case 34:case 32:l.scrollByY(k*e.scrollPagePercent,!1);break;case 33:l.scrollByY(-k*e.scrollPagePercent,!1);break;case 39:l.scrollByX(e.keyboardSpeed,!1);break;case 37:l.scrollByX(-e.keyboardSpeed,!1)}return f=a!=p||d!=n}var c,f,u=[];z&&u.push($[0]);A&&u.push(Z[0]);h.focus(function(){b.focus()});b.attr("tabindex",0).unbind("keydown.jsp keypress.jsp").bind("keydown.jsp",
function(b){if(!(b.target!==this&&(!u.length||!d(b.target).closest(u).length))){var e=p,h=n;switch(b.keyCode){case 40:case 38:case 34:case 32:case 33:case 39:case 37:c=b.keyCode;a();break;case 35:I(s-k);c=null;break;case 36:I(0),c=null}f=b.keyCode==c&&e!=p||h!=n;return!f}}).bind("keypress.jsp",function(b){b.keyCode==c&&a();return!f});e.hideFocus?(b.css("outline","none"),"hideFocus"in g[0]&&b.attr("hideFocus",!0)):(b.css("outline",""),"hideFocus"in g[0]&&b.attr("hideFocus",!1))}function Ea(){if(location.hash&&
1<location.hash.length){var a,c,b=escape(location.hash.substr(1));try{a=d("#"+b+', a[name="'+b+'"]')}catch(e){return}a.length&&h.find(b)&&(0===g.scrollTop()?c=setInterval(function(){0<g.scrollTop()&&(ea(a,!0),d(document).scrollTop(g.position().top),clearInterval(c))},50):(ea(a,!0),d(document).scrollTop(g.position().top)))}}function Fa(){d(document.body).data("jspHijack")||(d(document.body).data("jspHijack",!0),d(document.body).delegate("a[href*=#]","click",function(a){var c=this.href.substr(0,this.href.indexOf("#")),
b=location.href,e;-1!==location.href.indexOf("#")&&(b=location.href.substr(0,location.href.indexOf("#")));if(c===b){c=escape(this.href.substr(this.href.indexOf("#")+1));try{e=d("#"+c+', a[name="'+c+'"]')}catch(h){return}e.length&&(c=e.closest(".jspScrollable"),b=c.data("jsp"),b.scrollToElement(e,!0),c[0].scrollIntoView&&(b=d(ma).scrollTop(),e=e.offset().top,(e<b||e>b+d(ma).height())&&c[0].scrollIntoView()),a.preventDefault())}}))}function Ba(){var a,c,b,d,e,h=!1;g.unbind("touchstart.jsp touchmove.jsp touchend.jsp click.jsp-touchclick").bind("touchstart.jsp",
function(g){g=g.originalEvent.touches[0];a=G();c=H();b=g.pageX;d=g.pageY;e=!1;h=!0}).bind("touchmove.jsp",function(g){if(h){g=g.originalEvent.touches[0];var k=p,m=n;l.scrollTo(a+b-g.pageX,c+d-g.pageY);e=e||5<Math.abs(b-g.pageX)||5<Math.abs(d-g.pageY);return k==p&&m==n}}).bind("touchend.jsp",function(a){h=!1}).bind("click.jsp-touchclick",function(a){if(e)return e=!1})}var e,l=this,h,m,k,g,v,s,ha,Y,A,z,w,F,n,x,M,p,Z,D,ta,K,N,U,V,$,E,B,L,W,X,R,na,P,oa,aa=!0,ca=!0,ba=!1,da=!1,la=b.clone(!1,!1).empty(),
ia=d.fn.mwheelIntent?"mwheelIntent.jsp":"mousewheel.jsp";na=b.css("paddingTop")+" "+b.css("paddingRight")+" "+b.css("paddingBottom")+" "+b.css("paddingLeft");P=(parseInt(b.css("paddingLeft"),10)||0)+(parseInt(b.css("paddingRight"),10)||0);d.extend(l,{reinitialise:function(a){a=d.extend({},e,a);ga(a)},scrollToElement:function(a,c,b){ea(a,c,b)},scrollTo:function(a,c,b){Q(a,b);I(c,b)},scrollToX:function(a,c){Q(a,c)},scrollToY:function(a,c){I(a,c)},scrollToPercentX:function(a,c){Q(a*(v-m),c)},scrollToPercentY:function(a,
c){I(a*(s-k),c)},scrollBy:function(a,c,b){l.scrollByX(a,b);l.scrollByY(c,b)},scrollByX:function(a,c){var b=(G()+Math[0>a?"floor":"ceil"](a))/(v-m);T(b*M,c)},scrollByY:function(a,b){var d=(H()+Math[0>a?"floor":"ceil"](a))/(s-k);O(d*F,b)},positionDragX:function(a,b){T(a,b)},positionDragY:function(a,b){O(a,b)},animate:function(a,b,d,h){var g={};g[b]=d;a.animate(g,{duration:e.animateDuration,easing:e.animateEase,queue:!1,step:h})},getContentPositionX:function(){return G()},getContentPositionY:function(){return H()},
getContentWidth:function(){return v},getContentHeight:function(){return s},getPercentScrolledX:function(){return G()/(v-m)},getPercentScrolledY:function(){return H()/(s-k)},getIsScrollableH:function(){return z},getIsScrollableV:function(){return A},getContentPane:function(){return h},scrollToBottom:function(a){O(F,a)},hijackInternalLinks:d.noop,destroy:function(){var a=H(),c=G();b.removeClass("jspScrollable").unbind(".jsp");b.replaceWith(la.append(h.children()));la.scrollTop(a);la.scrollLeft(c);R&&
clearInterval(R)}});ga(C)}C=d.extend({},d.fn.jScrollPane.defaults,C);d.each(["arrowButtonSpeed","trackClickSpeed","keyboardSpeed"],function(){C[this]=C[this]||C.speed});return this.each(function(){var b=d(this),t=b.data("jsp");t?t.reinitialise(C):(d("script",b).filter('[type="text/javascript"],:not([type])').remove(),t=new fa(b,C),b.data("jsp",t))})};d.fn.jScrollPane.defaults={showArrows:!1,maintainPosition:!0,stickToBottom:!1,stickToRight:!1,clickOnTrack:!0,autoReinitialise:!1,autoReinitialiseDelay:500,
verticalDragMinHeight:0,verticalDragMaxHeight:99999,horizontalDragMinWidth:0,horizontalDragMaxWidth:99999,contentWidth:t,animateScroll:!1,animateDuration:300,animateEase:"linear",hijackInternalLinks:!1,verticalGutter:4,horizontalGutter:4,mouseWheelSpeed:3,arrowButtonSpeed:0,arrowRepeatFreq:50,arrowScrollOnHover:!1,trackClickSpeed:0,trackClickRepeatFreq:70,verticalArrowPositions:"split",horizontalArrowPositions:"split",enableKeyboardNavigation:!0,hideFocus:!1,keyboardSpeed:0,initialDelay:300,speed:30,
scrollPagePercent:0.8}})(jQuery,this);
